
if(LUA STREQUAL "luajit")
	set(HAKA_LUAJIT 1)
	set(HAKA_LUA51 1)

	macro(LUA_LINK target)
		LUAJIT_INSTALL()
		add_dependencies(${target} luajit)
		include_directories(${LUA_INCLUDE_DIR})
		link_directories(${LUA_LIBRARY_DIR})
		target_link_libraries(${target} ${LUA_LIBRARY})
	endmacro(LUA_LINK)
elseif(LUA STREQUAL "lua51")
	find_package(Lua51 REQUIRED)
	set(HAKA_LUAJIT 0)
	set(HAKA_LUA51 1)

	macro(LUA_LINK target)
		include_directories(${LUA_INCLUDE_DIR})
		link_directories(${LUA_LIBRARY_DIR})
		target_link_libraries(${target} ${LUA_LIBRARIES})
	endmacro(LUA_LINK)
elseif(LUA STREQUAL "custom")
	macro(LUA_LINK target)
		include_directories(${LUA_INCLUDE_DIR})
		link_directories(${LUA_LIBRARY_DIR})
		target_link_libraries(${target} ${LUA_LIBRARIES})
	endmacro(LUA_LINK)
else()
	message(FATAL_ERROR "Invalid Lua version")
endif()
